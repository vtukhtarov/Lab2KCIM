## СПм-22-6, Тухтаров Владислав Борисович
### Лабораторна робота №**3**. Використання засобів обчислювального интелекту для оптимізації імітаційних моделей

<br>

### Варіант 9, модель у середовищі NetLogo:
[Shepherds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Shepherds.nlogo)

<br>

### Вербальний опис моделі:
Цей проект заснований на двох простіших моделях: термітів, які збирають тріску на купи, і рухомих овець. У цьому проекті вівці безладно блукають, а пастухи ходять, намагаючись їх випасати. Чи опиняться вівці в одному стаді, залежить від кількості пастухів і від того, наскільки швидко вони рухаються порівняно з вівцями.
Пастухи дотримуються низки простих правил. Кожен пастух починає блукати випадковим чином. Якщо він натикається на вівцю, він підбирає вівцю та продовжує безладно блукати. Коли він натикається на іншу вівцю, він знаходить вільне місце поблизу, кладе свою вівцю та шукає іншу.

### Параметри Setup:
- **num-shepherds** - кількість пастухів на початку.
- **num-sheep** - кількість овець на початку.

### Параметри, що можуть надавати вплив під час роботи симуляції:
- **sheep-speed** - Швидкість овець.

### Показники роботи системи:
- current efficiency - відображає поточну ефективність вівчарства.
- Herding Efficiency - графік, що відображає ефективність вівчарства протягом симуляції.

<br>

### Налаштування середовища BehaviorSearch:

**Обрана модель**:
<pre>
C:\Program Files\NetLogo 6.3.0\models\Sample Models\Biology\Shepherds.nlogo
</pre>

**Параметри моделі** (вкладка Model):

*Параметри та їх можливі діапазони були **автоматично** вилучені середовищем BehaviorSearch із вибраної імітаційної моделі, для цього є кнопка «Завантажити діапазони параметрів із інтерфейсу моделі»*:

<pre>
["num-sheep" [0 1 500]]
["num-shepherds" [0 1 100]]
["sheep-speed" [0 0.01 0.2]]
</pre>
Використовувана **міра**:  
Для фітнес-функції *(вона ж функція пристосованості або цільова функція)* було обрано **значення середньої ефективності**.
та вказано у параметрі "**Measure**":
<pre>
mean [herding-efficiency] of turtles
</pre>

Середня ефективність всіх здобувачів повинна враховуватися **в середньому** за весь період симуляції тривалістю 3000 тактів, починаючи з 0 такту симуляції.  
*Параметр "**Mesure if**" зі значення true, по суті, і означає, що враховуватимуться всі такти симуляції, а чи не частина їх. Іноді має сенс не враховувати деякі такти через хаос в деяких моделях на початку їх використання. Наприклад, це показано в прикладі з документації BehaviorSearch.  
Параметри "**Setup**" та "**Go**" вказують відповідні процедури ініціалізації та запуску в логіці моделі (зазвичай вони так і називаються). BehaviorSearch в процесі роботи, по суті, замість користувача запускає ці процедури.*  
Параметр зупинки за умовою ("**Stop if**") у разі не використовувався.  

Загальний вигляд вкладки налаштувань параметрів моделі:

![Вкладка налаштувань параметрів моделі](parameters.png)

**Налаштування цільової функції** (вкладка Search Objective):  
Метою підбору параметрів імітаційної моделі є **максимізація** значення середньої енергії здобувачів – це вказано через параметр "**Goal**" зі значенням **Maximize Fitness**. Тобто необхідно визначити такі параметри налаштувань моделі, у яких здобувачі у процесі життя та розмноження покращують середнє значення енергії у окремого здобувача. При цьому цікавить не просто середня швидкість всіх машин у якийсь окремий момент симуляції, а середнє її значення за всю симуляцію (тривалість якої (3000 кроків) вказувалася на минулій вкладці). Для цього у параметрі "**Collected measure**", що визначає спосіб обліку значень обраного показника, вказано **MEAN_ACROSS_STEPS**.  
Щоб уникнути викривлення результатів через випадкові значення, що використовуються в логіці самої імітаційної моделі, **кожна симуляція повторюється по 10 разів**, результуюче значення розраховується як **середнє арифметичне**. 

Загальний вигляд вкладки налаштувань цільової функції:

![Вкладка налаштувань цільової функції](objective.png)

**Налаштування алгоритму пошуку** (вкладка Search Algorithm):  

Загальний вид вкладки налаштувань алгоритму пошуку для Генетичного алгоритму:

![Вкладка налаштувань пошуку](search_ga.png)

Загальний вид вкладки налаштувань алгоритму пошуку для Випадкового пошуку:

![Вкладка налаштувань пошуку](search_rs.png)

<br>

### Результати використання BehaviorSearch:

Діалогове вікно запуску пошуку:

![Вікно запуску пошуку](dialog.png)

Результат пошуку параметрів імітаційної моделі, використовуючи **генетичний алгоритм**:

![Результати пошуку за допомогою ГА](result-ga.png)

Результат пошуку параметрів імітаційної моделі, використовуючи **випадковий пошук**:

![Результати випадкового пошуку](result-rs.png)

Дивлячись на результати пошуку можна помітити, що у результаті випадкового пошуку значення фітнес функції вище ніж якщо використовувати генетичний алгоритм. Але у випадку випадкового пошуку завжди кількість овець наприкінці пошуку дорівнює 0. Зважаючи на це не можна вважати випадковий пошук доцільним.
